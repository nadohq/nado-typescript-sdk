query PaginatedAllMarketOrdersQuery(
  $productId: BigInt!
  $first: Int
  $skip: Int
) {
  orders(
    where: { productId: $productId }
    first: $first
    skip: $skip
    orderDirection: desc
    orderBy: reportedAt
  ) {
    ...OrderEntityFieldsFragment
  }
}

query PaginatedSubaccountOrdersQuery(
  $subaccountEntityId: String!
  $first: Int
  $skip: Int
) {
  orders(
    where: { subaccount: $subaccountEntityId }
    first: $first
    skip: $skip
    orderDirection: desc
    orderBy: reportedAt
  ) {
    ...OrderEntityFieldsFragment
  }
}

query PaginatedSubaccountOrdersForProductsQuery(
  $subaccountEntityId: String!
  $allowedProductIds: [BigInt!]!
  $first: Int
  $skip: Int
) {
  orders(
    where: { subaccount: $subaccountEntityId, productId_in: $allowedProductIds }
    first: $first
    skip: $skip
    orderDirection: desc
    orderBy: reportedAt
  ) {
    ...OrderEntityFieldsFragment
  }
}

query OrderByDigestQuery($digest: Bytes!, $productId: BigInt!) {
  orders(where: { digest: $digest, productId: $productId }) {
    ...OrderEntityFieldsFragment
  }
}

# All fields on Order
fragment OrderEntityFieldsFragment on Order {
  id
  digest
  priceX18
  productId
  type
  subaccount {
    subaccountId
  }
  reportedAt
  reportedAtBlock
  filledAmountX18
  totalAmount
  quoteAmountX18
  collectedFeeX18
}
